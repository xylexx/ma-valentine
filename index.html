<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emmo, veux-tu √™tre ma Valentine ?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Biblioth√®que de confettis -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;700&display=swap');

        body {
            background-color: #fff1f2;
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .kitsch-font {
            font-family: 'Pacifico', cursive;
        }

        #valentine-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 30px;
            box-shadow: 0 20px 50px rgba(244, 63, 94, 0.3);
            text-align: center;
            z-index: 10;
            border: 8px double #fb7185;
            max-width: 450px;
            width: 90%;
            position: relative;
        }

        .pingu-container {
            width: 180px;
            height: 180px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            overflow: hidden;
            border: 5px solid #fb7185;
            box-shadow: 0 0 20px rgba(251, 113, 133, 0.5);
            animation: bounce 2s infinite ease-in-out;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        /* Emoji de secours si l'image ne charge pas */
        .pingu-container::before {
            content: "üêß";
            font-size: 80px;
            position: absolute;
            z-index: 1;
        }

        .pingu-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: relative;
            z-index: 2; /* Passe devant l'emoji si charg√©e */
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0) rotate(-3deg); }
            50% { transform: translateY(-15px) rotate(3deg); }
        }

        #no-button {
            transition: all 0.15s ease-out;
            z-index: 100;
        }

        .celebration-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, #fff 0%, #ffe4e6 100%);
            z-index: 1000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        #ai-poem-box {
            display: none;
            background: #fff5f7;
            border: 2px dashed #fb7185;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 15px;
            font-style: italic;
            color: #be123c;
        }

        .loader {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #fb7185;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 5px;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="valentine-card">
        <div class="pingu-container">
            <!-- Remplace "pingu.jpg" par le nom exact de ton fichier sur GitHub -->
            <img src="pingu.jpg" alt="Pingu le doudou" onerror="this.style.display='none'">
        </div>
        
        <h1 class="kitsch-font text-3xl text-rose-600 mb-2 leading-tight">Emmo, veux-tu √™tre ma Valentine ?</h1>
        <p class="text-rose-400 mb-6 font-bold">‚ú® Pingu attend ta r√©ponse ! ‚ú®</p>
        
        <div class="flex flex-col sm:flex-row justify-center gap-4 items-center mb-6">
            <button id="yes-button" class="bg-rose-500 hover:bg-rose-600 text-white font-bold py-4 px-10 rounded-full text-2xl shadow-xl transform hover:scale-110 transition-all">
                OUI ! üíñ
            </button>
            
            <button id="no-button" class="bg-gray-300 text-gray-600 font-bold py-3 px-8 rounded-full text-lg shadow-md">
                Non...
            </button>
        </div>

        <button id="ai-button" class="text-xs border border-rose-200 text-rose-400 px-3 py-1 rounded-full hover:bg-rose-50 transition-colors mx-auto block">
            ‚ú® Un mot doux de Pingu ?
        </button>

        <div id="ai-poem-box">
            <div id="poem-content"></div>
        </div>
    </div>

    <div id="celebration" class="celebration-overlay">
        <div class="mb-6 text-9xl animate-bounce">üêßüíô</div>
        <h2 class="kitsch-font text-6xl text-rose-600 mb-4">YOUPIIIII !</h2>
        <p class="text-3xl text-rose-500 max-w-md mx-auto px-4 font-bold">Emmo a dit OUI ! <br>Pingu est aux anges ! üéâ</p>
        <div class="mt-8 flex gap-4 text-5xl">üçìüíçü•Çüç´</div>
        <button onclick="location.reload()" class="mt-12 text-rose-300 underline">Recommencer</button>
    </div>

    <script>
        const noBtn = document.getElementById('no-button');
        const yesBtn = document.getElementById('yes-button');
        const celebration = document.getElementById('celebration');
        const aiButton = document.getElementById('ai-button');
        const poemBox = document.getElementById('ai-poem-box');
        const poemContent = document.getElementById('poem-content');

        // Bouton Non qui s'enfuit
        const moveButton = () => {
            const x = Math.random() * (window.innerWidth - noBtn.offsetWidth);
            const y = Math.random() * (window.innerHeight - noBtn.offsetHeight);
            noBtn.style.position = 'fixed';
            noBtn.style.left = `${x}px`;
            noBtn.style.top = `${y}px`;
        };
        noBtn.addEventListener('mouseover', moveButton);
        noBtn.addEventListener('click', moveButton);

        // IA Gemini
        const apiKey = ""; 

        aiButton.onclick = async () => {
            aiButton.disabled = true;
            aiButton.innerHTML = '<span class="loader"></span> Pingu √©crit...';
            poemBox.style.display = 'block';
            poemContent.innerText = "R√©flexion intense de Pingu...";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: "√âcris un message ultra court et mignon (15 mots max) de la part de Pingu le pingouin pour Emmo. Pingu veut qu'elle soit sa valentine. Utilise des emojis de poissons et de coeurs." }] }]
                    })
                });
                const data = await response.json();
                const text = data.candidates[0].content.parts[0].text;
                poemContent.innerText = text;
            } catch (err) {
                poemContent.innerText = "Noot noot ! Je t'aime tellement Emmo ! ‚ù§Ô∏èüêü";
            } finally {
                aiButton.innerHTML = '‚ú® Un autre mot doux ?';
                aiButton.disabled = false;
            }
        };

        // Confettis
        function triggerConfetti() {
            if (typeof confetti === 'function') {
                confetti({
                    particleCount: 150,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#fb7185', '#ff0000', '#ffffff']
                });
            }
        }

        yesBtn.onclick = () => {
            celebration.style.display = 'flex';
            triggerConfetti();
            // Salves r√©p√©t√©es
            let count = 0;
            const interval = setInterval(() => {
                triggerConfetti();
                count++;
                if(count > 4) clearInterval(interval);
            }, 700);
        };
    </script>
</body>
</html>